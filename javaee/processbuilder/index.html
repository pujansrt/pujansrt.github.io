<!DOCTYPE HTML> <html lang="en-US"> <head> <title>AppKubos: How to Run System Commands in Java</title> <meta http-equiv="content-type" content="text/html; charset=utf-8"/> <meta name="description" content="How to Run System Commands in Java"/> <meta name="HandheldFriendly" content="True"/> <meta name="viewport" content="width=device-width, initial-scale=1.0"/> <meta name="referrer" content="origin"/> <link rel="icon" href="/favicon.ico" type="image/x-icon"> <!--[if lte IE 8]><script src="/assets/css/ie/html5shiv.js"></script><![endif]--> <noscript> <link rel="stylesheet" href="/assets/css/skel.css"/> <link rel="stylesheet" href="/assets/css/style.css"/> <link rel="stylesheet" href="/assets/css/style-wide.css"/> </noscript> <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script> <script async src="/assets/js/jquery.dropotron.min.js"></script> <script src="/assets/js/skel.min.js"></script> <script src="/assets/js/skel-layers.min.js"></script> <script src="/assets/js/init.js"></script> <script async src="/assets/js/lunr.min.js"></script> <script async src="/assets/js/search.js"></script> <link rel="alternate" type="application/rss+xml" title="AppKubos" href="http://www.appkubos.com/feed.xml"/> </head> <body> <div id="header"> <nav id="nav"> <ul> <li><a href="/">Home</a></li> <li><a href="/pujan">About</a></li> <li class="headmenu" data-cat="javaee" data-curr="javaee"> <a name="JavaEE">JavaEE</a> <ul> <li><a href=""></a></li> <li><a href="/javaee/ws/soapvsrest/">SOAP vs REST</a></li> <li><a href="/javaee/spring/security/credential/">Spring Security Credentails See Password at Session</a></li> <li><a href="/javaee/spring/configuration/">Spring Security Configuration with Form Login</a></li> <li><a href="/javaee/jboss/jspfix/">JBoss Fix for JSP</a></li> <li><a href="/javaee/processbuilder/">How to Run System Commands in Java</a></li> <li><a href="/javaee/jackson/csv-creator/">CSV Creator using Jackson</a></li> <li><a href="/javaee/jaxws/sample-webservice/">JAX-WS Webservices using Annotations</a></li> </ul> </li><li class="headmenu" data-cat="other" data-curr="javaee"> <a name="Other">Other</a> <ul> <li><a href=""></a></li> <li><a href="/etc/calendar-next-4-months/">Calendar For Next Four Months</a></li> <li><a href="/etc/curl/">Curl Command</a></li> <li><a href="/etc/http2/">HTTP/2 Explained</a></li> <li><a href="/etc/tshark-commands/">TShark Commands</a></li> <li><a href="/etc/latency/">Latency Comparison</a></li> <li><a href="/etc/scala-introduction/">Scala Introduction</a></li> <li><a href="/etc/groovy-run-from-java/">Run Groovy from Java</a></li> </ul> </li><li class="headmenu" data-cat="python" data-curr="javaee"> <a name="Python">Python</a> <ul> <li><a href=""></a></li> <li><a href="/python/tutorial/">Python Tutorial</a></li> <li><a href="/python/file-handling/">Python File Handling</a></li> <li><a href="/python/dictionary/">Python Dictionary</a></li> </ul> </li><li class="headmenu" data-cat="integration" data-curr="javaee"> <a name="Integration">Integration</a> <ul> <li><a href=""></a></li> <li><a href="/integration/microservices/">Microservices Explained</a></li> <li><a href="/integration/oauth2/">OAuth2 Architecture</a></li> </ul> </li> </ul> </nav> </div> <section class="wrapper style1"> <div class="container"> <section> <header class="major"> <h2>How to Run System Commands in Java</h2> </header> <div class="row"> <div class="12u"> <div class="box post"> <p>The <strong>java.lang.ProcessBuilder.command(String… command)</strong> method Sets this process builder’s operating system program and arguments. This is a convenience method that sets the command to a string list containing the same strings as the command array, in the same order. In order to execute this command you can supply as argument as you want and at the same time you can also provide command to execute in the directory (here it is /Users/pujan/somedir)</p> <figure class="highlight"><pre><code class="language-java" data-lang="java"><span class="lineno"> 1</span> <span class="kn">import</span> <span class="nn">java.io.*</span><span class="o">;</span>
<span class="lineno"> 2</span> <span class="kn">import</span> <span class="nn">java.util.Scanner</span><span class="o">;</span>
<span class="lineno"> 3</span> 
<span class="lineno"> 4</span> <span class="cm">/**</span>
<span class="lineno"> 5</span> <span class="cm"> * ReadFile</span>
<span class="lineno"> 6</span> <span class="cm"> * @author pujan</span>
<span class="lineno"> 7</span> <span class="cm"> */</span>
<span class="lineno"> 8</span> <span class="kd">public</span> <span class="kd">class</span> <span class="nc">ProcessBuilderTest</span><span class="o">{</span>
<span class="lineno"> 9</span>      
<span class="lineno">10</span> 	<span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="n">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="kd">throws</span> <span class="n">InterruptedException</span><span class="o">,</span> <span class="n">IOException</span><span class="o">{</span>
<span class="lineno">11</span> 		<span class="n">ProcessBuilder</span> <span class="n">pb</span> <span class="o">=</span> <span class="k">new</span> <span class="nf">ProcessBuilder</span><span class="o">(</span><span class="s">&quot;/usr/bin/git&quot;</span><span class="o">,</span> <span class="s">&quot;clone&quot;</span><span class="o">,</span> <span class="s">&quot;http://192.168.0.111/app.git&quot;</span><span class="o">);</span>
<span class="lineno">12</span> 		<span class="n">pb</span><span class="o">.</span><span class="na">directory</span><span class="o">(</span><span class="k">new</span> <span class="nf">File</span><span class="o">(</span><span class="s">&quot;/Users/pujan/somedir&quot;</span><span class="o">).</span><span class="na">getAbsoluteFile</span><span class="o">());</span>
<span class="lineno">13</span> 		<span class="n">pb</span><span class="o">.</span><span class="na">redirectErrorStream</span><span class="o">(</span><span class="kc">true</span><span class="o">);</span>
<span class="lineno">14</span> 		<span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span> <span class="n">executeCommand</span><span class="o">(</span><span class="n">pb</span><span class="o">));</span>
<span class="lineno">15</span> 	<span class="o">}</span>
<span class="lineno">16</span>   
<span class="lineno">17</span>     <span class="kd">public</span> <span class="kd">static</span> <span class="n">String</span> <span class="nf">executeCommand</span><span class="o">(</span><span class="n">ProcessBuilder</span> <span class="n">pb</span><span class="o">)</span> <span class="kd">throws</span> <span class="n">InterruptedException</span><span class="o">,</span> <span class="n">IOException</span> <span class="o">{</span>
<span class="lineno">18</span> 		<span class="n">Process</span> <span class="n">process</span> <span class="o">=</span> <span class="n">pb</span><span class="o">.</span><span class="na">start</span><span class="o">();</span>
<span class="lineno">19</span> 		<span class="n">Scanner</span> <span class="n">s</span> <span class="o">=</span> <span class="k">new</span> <span class="nf">Scanner</span><span class="o">(</span><span class="n">process</span><span class="o">.</span><span class="na">getInputStream</span><span class="o">());</span>
<span class="lineno">20</span> 		<span class="n">StringBuilder</span> <span class="n">text</span> <span class="o">=</span> <span class="k">new</span> <span class="nf">StringBuilder</span><span class="o">();</span>
<span class="lineno">21</span> 		<span class="k">while</span> <span class="o">(</span><span class="n">s</span><span class="o">.</span><span class="na">hasNextLine</span><span class="o">())</span> <span class="o">{</span>
<span class="lineno">22</span> 			<span class="n">text</span><span class="o">.</span><span class="na">append</span><span class="o">(</span><span class="n">s</span><span class="o">.</span><span class="na">nextLine</span><span class="o">());</span>
<span class="lineno">23</span> 			<span class="n">text</span><span class="o">.</span><span class="na">append</span><span class="o">(</span><span class="s">&quot;\\n&quot;</span><span class="o">);</span>
<span class="lineno">24</span> 		<span class="o">}</span>
<span class="lineno">25</span> 		<span class="n">s</span><span class="o">.</span><span class="na">close</span><span class="o">();</span>
<span class="lineno">26</span> 		<span class="k">return</span> <span class="n">text</span><span class="o">.</span><span class="na">toString</span><span class="o">();</span>
<span class="lineno">27</span> 	<span class="o">}</span>
<span class="lineno">28</span> <span class="o">}</span></code></pre></figure> <p>ProcessBuilder takes arguments (as many command requires).Alternatively you can pass a ArrayList.</p> <figure class="highlight"><pre><code class="language-java" data-lang="java"><span class="n">List</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;</span> <span class="n">command</span> <span class="o">=</span> <span class="k">new</span> <span class="n">ArrayList</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;();</span>
<span class="n">command</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="s">&quot;ls&quot;</span><span class="o">);</span>
<span class="n">command</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="s">&quot;-l&quot;</span><span class="o">);</span>
<span class="n">command</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="s">&quot;/var/tmp&quot;</span><span class="o">);</span>
<span class="n">ProcessBuilder</span> <span class="n">pb</span> <span class="o">=</span> <span class="k">new</span> <span class="nf">ProcessBuilder</span><span class="o">(</span><span class="n">command</span><span class="o">);</span></code></pre></figure> <p>By default ProcessBuilder looks into fewer system directories for executables. Therefore it is good practice to provide full path (see line no 11). However, for some reasons you can not provide full path but only executable name (here git) then there is possibilities that executable is not in usr/bin or /sbin but in some special directory such as /usr/local/git/bin and it is not in processbuilder’s path. You can set it as following:</p> <figure class="highlight"><pre><code class="language-java" data-lang="java"><span class="n">Map</span><span class="o">&lt;</span><span class="n">String</span><span class="o">,</span> <span class="n">String</span><span class="o">&gt;</span> <span class="n">env</span> <span class="o">=</span> <span class="n">pb</span><span class="o">.</span><span class="na">environment</span><span class="o">();</span>
<span class="n">path</span> <span class="o">=</span> <span class="n">path</span> <span class="o">+</span> <span class="n">File</span><span class="o">.</span><span class="na">pathSeparator</span> <span class="o">+</span> <span class="s">&quot;/usr/local/git/bin&quot;</span><span class="o">;</span>
<span class="n">env</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">&quot;PATH&quot;</span><span class="o">,</span> <span class="n">path</span><span class="o">);</span></code></pre></figure> </div> </div> </div> </section> </div> </section> <div id="footer"> <div class="container"> <div class="row "> <section class="6u"> <h3>More Links to Stuff</h3> <ul class="url"> <li><a href="/etc/calendar-next-4-months/">Calendar For Next Four Months</a></li><li><a href="/javaee/ws/soapvsrest/">SOAP vs REST</a></li><li><a href="/web/regex/">Regex</a></li><li><a href="/javaee/spring/security/credential/">Spring Security Credentails See Password at Session</a></li><li><a href="/etc/curl/">Curl Command</a></li><li><a href="/etc/http2/">HTTP/2 Explained</a></li> </ul> </section> <section class="6u"> <h3>Search Posts</h3> <form action="get" id="site_search"> <input type="text" id="search_box"> <input type="submit" value="Search"> </form> <ul id="search_results"></ul> </section> </div> </div> <ul class="icons"> <li><a href="http://github.com/pujansrt" class="icon fa-github"><span class="label">GitHub</span></a></li> <li><a href="http://www.linkedin.com/in/pujansrt" class="icon fa-linkedin"><span class="label">LinkedIn</span></a></li> <li><a href="https://plus.google.com/+PujanSrivastava" class="icon fa-google-plus"><span class="label">Google+</span></a></li> </ul> <div class="copyright"> <ul class="menu"> <li>&copy; Appkubos. All rights reserved 2010-2016</li> </ul> </div> </div> <script>(function(d,e,j,h,f,c,b){d.GoogleAnalyticsObject=f;d[f]=d[f]||function(){(d[f].q=d[f].q||[]).push(arguments)},d[f].l=1*new Date();c=e.createElement(j),b=e.getElementsByTagName(j)[0];c.async=1;c.src=h;b.parentNode.insertBefore(c,b)})(window,document,"script","//www.appkubos.com/assets/js/analytics.js","ga");ga("create","UA-72013918-1","auto");ga("send","pageview");$(function(a){$(".headmenu").each(function(b){var c=$(this);if($(c).attr("data-curr")==$(c).attr("data-cat")){$(c).addClass("current")}});loadAsyncCSS("https://maxcdn.bootstrapcdn.com/font-awesome/4.5.0/css/font-awesome.min.css");loadAsyncCSS("/assets/css/pygments.css")});function loadAsyncCSS(a){if(document.createStyleSheet){document.createStyleSheet(a)}else{$("head").append($("<link rel='stylesheet' href='"+a+"' type='text/css' media='screen' />"))}};</script> </body> </html>