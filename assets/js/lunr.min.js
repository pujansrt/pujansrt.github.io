!function(){var a=function(b){var c=new a.Index;return c.pipeline.add(a.trimmer,a.stopWordFilter,a.stemmer),b&&b.call(c,c),c};a.version="0.6.0",a.utils={},a.utils.warn=function(b){return function(c){b.console&&console.warn&&console.warn(c)}}(this),a.utils.asString=function(b){return void 0===b||null===b?"":b.toString()},a.EventEmitter=function(){this.events={}},a.EventEmitter.prototype.addListener=function(){var b=Array.prototype.slice.call(arguments),c=b.pop(),d=b;if("function"!=typeof c){throw new TypeError("last argument must be a function")}d.forEach(function(e){this.hasHandler(e)||(this.events[e]=[]),this.events[e].push(c)},this)},a.EventEmitter.prototype.removeListener=function(b,c){if(this.hasHandler(b)){var d=this.events[b].indexOf(c);this.events[b].splice(d,1),this.events[b].length||delete this.events[b]}},a.EventEmitter.prototype.emit=function(b){if(this.hasHandler(b)){var c=Array.prototype.slice.call(arguments,1);this.events[b].forEach(function(d){d.apply(void 0,c)})}},a.EventEmitter.prototype.hasHandler=function(b){return b in this.events},a.tokenizer=function(b){return arguments.length&&null!=b&&void 0!=b?Array.isArray(b)?b.map(function(c){return a.utils.asString(c).toLowerCase()}):b.toString().trim().toLowerCase().split(a.tokenizer.seperator):[]},a.tokenizer.seperator=/[\s\-]+/,a.Pipeline=function(){this._stack=[]},a.Pipeline.registeredFunctions={},a.Pipeline.registerFunction=function(b,c){c in this.registeredFunctions&&a.utils.warn("Overwriting existing registered function: "+c),b.label=c,a.Pipeline.registeredFunctions[b.label]=b},a.Pipeline.warnIfFunctionNotRegistered=function(b){var c=b.label&&b.label in this.registeredFunctions;c||a.utils.warn("Function is not registered with pipeline. This may cause problems when serialising the index.\n",b)},a.Pipeline.load=function(b){var c=new a.Pipeline;return b.forEach(function(f){var d=a.Pipeline.registeredFunctions[f];if(!d){throw new Error("Cannot load un-registered function: "+f)}c.add(d)}),c},a.Pipeline.prototype.add=function(){var b=Array.prototype.slice.call(arguments);b.forEach(function(c){a.Pipeline.warnIfFunctionNotRegistered(c),this._stack.push(c)},this)},a.Pipeline.prototype.after=function(c,d){a.Pipeline.warnIfFunctionNotRegistered(d);var b=this._stack.indexOf(c);if(-1==b){throw new Error("Cannot find existingFn")}b+=1,this._stack.splice(b,0,d)},a.Pipeline.prototype.before=function(c,d){a.Pipeline.warnIfFunctionNotRegistered(d);var b=this._stack.indexOf(c);if(-1==b){throw new Error("Cannot find existingFn")}this._stack.splice(b,0,d)},a.Pipeline.prototype.remove=function(b){var c=this._stack.indexOf(b);-1!=c&&this._stack.splice(c,1)},a.Pipeline.prototype.run=function(c){for(var g=[],j=c.length,b=this._stack.length,f=0;j>f;f++){for(var h=c[f],d=0;b>d&&(h=this._stack[d](h,f,c),void 0!==h&&""!==h);d++){}void 0!==h&&""!==h&&g.push(h)}return g},a.Pipeline.prototype.reset=function(){this._stack=[]},a.Pipeline.prototype.toJSON=function(){return this._stack.map(function(b){return a.Pipeline.warnIfFunctionNotRegistered(b),b.label})},a.Vector=function(){this._magnitude=null,this.list=void 0,this.length=0},a.Vector.Node=function(b,c,d){this.idx=b,this.val=c,this.next=d},a.Vector.prototype.insert=function(d,g){this._magnitude=void 0;var b=this.list;if(!b){return this.list=new a.Vector.Node(d,g,b),this.length++}if(d<b.idx){return this.list=new a.Vector.Node(d,g,b),this.length++}for(var c=b,f=b.next;void 0!=f;){if(d<f.idx){return c.next=new a.Vector.Node(d,g,f),this.length++}c=f,f=f.next}return c.next=new a.Vector.Node(d,g,f),this.length++},a.Vector.prototype.magnitude=function(){if(this._magnitude){return this._magnitude}for(var b,c=this.list,d=0;c;){b=c.val,d+=b*b,c=c.next}return this._magnitude=Math.sqrt(d)},a.Vector.prototype.dot=function(c){for(var d=this.list,f=c.list,b=0;d&&f;){d.idx<f.idx?d=d.next:d.idx>f.idx?f=f.next:(b+=d.val*f.val,d=d.next,f=f.next)}return b},a.Vector.prototype.similarity=function(b){return this.dot(b)/(this.magnitude()*b.magnitude())},a.SortedSet=function(){this.length=0,this.elements=[]},a.SortedSet.load=function(b){var c=new this;return c.elements=b,c.length=b.length,c},a.SortedSet.prototype.add=function(){var b,c;for(b=0;b<arguments.length;b++){c=arguments[b],~this.indexOf(c)||this.elements.splice(this.locationFor(c),0,c)}this.length=this.elements.length},a.SortedSet.prototype.toArray=function(){return this.elements.slice()},a.SortedSet.prototype.map=function(b,c){return this.elements.map(b,c)},a.SortedSet.prototype.forEach=function(b,c){return this.elements.forEach(b,c)},a.SortedSet.prototype.indexOf=function(c){for(var f=0,h=this.elements.length,b=h-f,d=f+Math.floor(b/2),g=this.elements[d];b>1;){if(g===c){return d}c>g&&(f=d),g>c&&(h=d),b=h-f,d=f+Math.floor(b/2),g=this.elements[d]}return g===c?d:-1},a.SortedSet.prototype.locationFor=function(c){for(var f=0,h=this.elements.length,b=h-f,d=f+Math.floor(b/2),g=this.elements[d];b>1;){c>g&&(f=d),g>c&&(h=d),b=h-f,d=f+Math.floor(b/2),g=this.elements[d]}return g>c?d:c>g?d+1:void 0},a.SortedSet.prototype.intersect=function(j){for(var l=new a.SortedSet,c=0,g=0,k=this.length,f=j.length,b=this.elements,d=j.elements;;){if(c>k-1||g>f-1){break}b[c]!==d[g]?b[c]<d[g]?c++:b[c]>d[g]&&g++:(l.add(b[c]),c++,g++)}return l},a.SortedSet.prototype.clone=function(){var b=new a.SortedSet;return b.elements=this.toArray(),b.length=b.elements.length,b},a.SortedSet.prototype.union=function(c){var d,f,b;return this.length>=c.length?(d=this,f=c):(d=c,f=this),b=d.clone(),b.add.apply(b,f.toArray()),b},a.SortedSet.prototype.toJSON=function(){return this.toArray()},a.Index=function(){this._fields=[],this._ref="id",this.pipeline=new a.Pipeline,this.documentStore=new a.Store,this.tokenStore=new a.TokenStore,this.corpusTokens=new a.SortedSet,this.eventEmitter=new a.EventEmitter,this._idfCache={},this.on("add","remove","update",function(){this._idfCache={}}.bind(this))},a.Index.prototype.on=function(){var b=Array.prototype.slice.call(arguments);return this.eventEmitter.addListener.apply(this.eventEmitter,b)},a.Index.prototype.off=function(b,c){return this.eventEmitter.removeListener(b,c)},a.Index.load=function(b){b.version!==a.version&&a.utils.warn("version mismatch: current "+a.version+" importing "+b.version);var c=new this;return c._fields=b.fields,c._ref=b.ref,c.documentStore=a.Store.load(b.documentStore),c.tokenStore=a.TokenStore.load(b.tokenStore),c.corpusTokens=a.SortedSet.load(b.corpusTokens),c.pipeline=a.Pipeline.load(b.pipeline),c},a.Index.prototype.field=function(b,c){var c=c||{},d={name:b,boost:c.boost||1};return this._fields.push(d),this},a.Index.prototype.ref=function(b){return this._ref=b,this},a.Index.prototype.add=function(j,l){var c={},g=new a.SortedSet,k=j[this._ref],l=void 0===l?!0:l;this._fields.forEach(function(h){var e=this.pipeline.run(a.tokenizer(j[h.name]));c[h.name]=e,a.SortedSet.prototype.add.apply(g,e)},this),this.documentStore.set(k,g),a.SortedSet.prototype.add.apply(this.corpusTokens,g.toArray());for(var f=0;f<g.length;f++){var b=g.elements[f],d=this._fields.reduce(function(h,m){var o=c[m.name].length;if(!o){return h}var i=c[m.name].filter(function(e){return e===b}).length;return h+i/o*m.boost},0);this.tokenStore.add(b,{ref:k,tf:d})}l&&this.eventEmitter.emit("add",j,this)},a.Index.prototype.remove=function(c,d){var f=c[this._ref],d=void 0===d?!0:d;if(this.documentStore.has(f)){var b=this.documentStore.get(f);this.documentStore.remove(f),b.forEach(function(e){this.tokenStore.remove(e,f)},this),d&&this.eventEmitter.emit("remove",c,this)}},a.Index.prototype.update=function(b,c){var c=void 0===c?!0:c;this.remove(b,!1),this.add(b,!1),c&&this.eventEmitter.emit("update",b,this)},a.Index.prototype.idf=function(c){var d="@"+c;if(Object.prototype.hasOwnProperty.call(this._idfCache,d)){return this._idfCache[d]}var f=this.tokenStore.count(c),b=1;return f>0&&(b=1+Math.log(this.documentStore.length/f)),this._idfCache[d]=b},a.Index.prototype.search=function(g){var j=this.pipeline.run(a.tokenizer(g)),c=new a.Vector,f=[],h=this._fields.reduce(function(i,k){return i+k.boost},0),d=j.some(function(e){return this.tokenStore.has(e)},this);if(!d){return[]}j.forEach(function(o,p,m){var i=1/m.length*this._fields.length*h,l=this,k=this.tokenStore.expand(o).reduce(function(w,e){var t=l.corpusTokens.indexOf(e),D=l.idf(e),C=1,x=new a.SortedSet;if(e!==o){var A=Math.max(3,e.length-o.length);C=1/Math.log(A)}t>-1&&c.insert(t,i*D*C);for(var y=l.tokenStore.get(e),q=Object.keys(y),z=q.length,B=0;z>B;B++){x.add(y[q[B]].ref)}return w.union(x)},new a.SortedSet);f.push(k)},this);var b=f.reduce(function(i,k){return i.intersect(k)});return b.map(function(e){return{ref:e,score:c.similarity(this.documentVector(e))}},this).sort(function(i,k){return k.score-i.score})},a.Index.prototype.documentVector=function(j){for(var l=this.documentStore.get(j),c=l.length,g=new a.Vector,k=0;c>k;k++){var f=l.elements[k],b=this.tokenStore.get(f)[j].tf,d=this.idf(f);g.insert(this.corpusTokens.indexOf(f),b*d)}return g},a.Index.prototype.toJSON=function(){return{version:a.version,fields:this._fields,ref:this._ref,documentStore:this.documentStore.toJSON(),tokenStore:this.tokenStore.toJSON(),corpusTokens:this.corpusTokens.toJSON(),pipeline:this.pipeline.toJSON()}},a.Index.prototype.use=function(b){var c=Array.prototype.slice.call(arguments,1);c.unshift(this),b.apply(this,c)},a.Store=function(){this.store={},this.length=0},a.Store.load=function(b){var c=new this;return c.length=b.length,c.store=Object.keys(b.store).reduce(function(e,d){return e[d]=a.SortedSet.load(b.store[d]),e},{}),c},a.Store.prototype.set=function(b,c){this.has(b)||this.length++,this.store[b]=c},a.Store.prototype.get=function(b){return this.store[b]},a.Store.prototype.has=function(b){return b in this.store},a.Store.prototype.remove=function(b){this.has(b)&&(delete this.store[b],this.length--)},a.Store.prototype.toJSON=function(){return{store:this.store,length:this.length}},a.stemmer=function(){var L={ational:"ate",tional:"tion",enci:"ence",anci:"ance",izer:"ize",bli:"ble",alli:"al",entli:"ent",eli:"e",ousli:"ous",ization:"ize",ation:"ate",ator:"ate",alism:"al",iveness:"ive",fulness:"ful",ousness:"ous",aliti:"al",iviti:"ive",biliti:"ble",logi:"log"},ad={icate:"ic",ative:"",alize:"al",iciti:"ic",ical:"ic",ful:"",ness:""},V="[^aeiou]",Z="[aeiouy]",Q=V+"[^aeiouy]*",U=Z+"[aeiou]*",M="^("+Q+")?"+U+Q,ah="^("+Q+")?"+U+Q+"("+U+")?$",aa="^("+Q+")?"+U+Q+U+Q,J="^("+Q+")?"+Z,X=new RegExp(M),af=new RegExp(aa),ac=new RegExp(ah),R=new RegExp(J),ae=/^(.+?)(ss|i)es$/,H=/^(.+?)([^s])s$/,W=/^(.+?)eed$/,ab=/^(.+?)(ed|ing)$/,C=/.$/,q=/(at|bl|iz)$/,G=new RegExp("([^aeiouylsz])\\1$"),D=new RegExp("^"+Q+Z+"[^aeiouwxy]$"),Y=/^(.+?[^aeiou])y$/,ag=/^(.+?)(ational|tional|enci|anci|izer|bli|alli|entli|eli|ousli|ization|ation|ator|alism|iveness|fulness|ousness|aliti|iviti|biliti|logi)$/,K=/^(.+?)(icate|ative|alize|iciti|ical|ful|ness)$/,ai=/^(.+?)(al|ance|ence|er|ic|able|ible|ant|ement|ment|ent|ou|ism|ate|iti|ous|ive|ize)$/,I=/^(.+?)(s|t)(ion)$/,A=/^(.+?)e$/,z=/ll$/,B=new RegExp("^"+Q+Z+"[^aeiouwxy]$"),j=function(d){var f,b,c,m,k,g,l;if(d.length<3){return d}if(c=d.substr(0,1),"y"==c&&(d=c.toUpperCase()+d.substr(1)),m=ae,k=H,m.test(d)?d=d.replace(m,"$1$2"):k.test(d)&&(d=d.replace(k,"$1$2")),m=W,k=ab,m.test(d)){var e=m.exec(d);m=X,m.test(e[1])&&(m=C,d=d.replace(m,""))}else{if(k.test(d)){var e=k.exec(d);f=e[1],k=R,k.test(f)&&(d=f,k=q,g=G,l=D,k.test(d)?d+="e":g.test(d)?(m=C,d=d.replace(m,"")):l.test(d)&&(d+="e"))}}if(m=Y,m.test(d)){var e=m.exec(d);f=e[1],d=f+"i"}if(m=ag,m.test(d)){var e=m.exec(d);f=e[1],b=e[2],m=X,m.test(f)&&(d=f+L[b])}if(m=K,m.test(d)){var e=m.exec(d);f=e[1],b=e[2],m=X,m.test(f)&&(d=f+ad[b])}if(m=ai,k=I,m.test(d)){var e=m.exec(d);f=e[1],m=af,m.test(f)&&(d=f)}else{if(k.test(d)){var e=k.exec(d);f=e[1]+e[2],k=af,k.test(f)&&(d=f)}}if(m=A,m.test(d)){var e=m.exec(d);f=e[1],m=af,k=ac,g=B,(m.test(f)||k.test(f)&&!g.test(f))&&(d=f)}return m=z,k=af,m.test(d)&&k.test(d)&&(m=C,d=d.replace(m,"")),"y"==c&&(d=c.toLowerCase()+d.substr(1)),d};return j}(),a.Pipeline.registerFunction(a.stemmer,"stemmer"),a.generateStopWordFilter=function(b){var c=b.reduce(function(d,f){return d[f]=f,d},{});return function(d){return d&&c[d]!==d?d:void 0}},a.stopWordFilter=a.generateStopWordFilter(["a","able","about","across","after","all","almost","also","am","among","an","and","any","are","as","at","be","because","been","but","by","can","cannot","could","dear","did","do","does","either","else","ever","every","for","from","get","got","had","has","have","he","her","hers","him","his","how","however","i","if","in","into","is","it","its","just","least","let","like","likely","may","me","might","most","must","my","neither","no","nor","not","of","off","often","on","only","or","other","our","own","rather","said","say","says","she","should","since","so","some","than","that","the","their","them","then","there","these","they","this","tis","to","too","twas","us","wants","was","we","were","what","when","where","which","while","who","whom","why","will","with","would","yet","you","your"]),a.Pipeline.registerFunction(a.stopWordFilter,"stopWordFilter"),a.trimmer=function(b){return b.replace(/^\W+/,"").replace(/\W+$/,"")},a.Pipeline.registerFunction(a.trimmer,"trimmer"),a.TokenStore=function(){this.root={docs:{}},this.length=0},a.TokenStore.load=function(b){var c=new this;return c.root=b.root,c.length=b.length,c},a.TokenStore.prototype.add=function(c,f,g){var g=g||this.root,b=c.charAt(0),d=c.slice(1);return b in g||(g[b]={docs:{}}),0===d.length?(g[b].docs[f.ref]=f,void (this.length+=1)):this.add(d,f,g[b])},a.TokenStore.prototype.has=function(b){if(!b){return !1}for(var c=this.root,d=0;d<b.length;d++){if(!c[b.charAt(d)]){return !1}c=c[b.charAt(d)]}return !0},a.TokenStore.prototype.getNode=function(b){if(!b){return{}}for(var c=this.root,d=0;d<b.length;d++){if(!c[b.charAt(d)]){return{}}c=c[b.charAt(d)]}return c},a.TokenStore.prototype.get=function(b,c){return this.getNode(b,c).docs||{}},a.TokenStore.prototype.count=function(b,c){return Object.keys(this.get(b,c)).length},a.TokenStore.prototype.remove=function(c,d){if(c){for(var f=this.root,b=0;b<c.length;b++){if(!(c.charAt(b) in f)){return}f=f[c.charAt(b)]}delete f.docs[d]}},a.TokenStore.prototype.expand=function(c,d){var f=this.getNode(c),b=f.docs||{},d=d||[];return Object.keys(b).length&&d.push(c),Object.keys(f).forEach(function(e){"docs"!==e&&d.concat(this.expand(c+e,d))},this),d},a.TokenStore.prototype.toJSON=function(){return{root:this.root,length:this.length}},function(b,c){"function"==typeof define&&define.amd?define(c):"object"==typeof exports?module.exports=c():b.lunr=c()}(this,function(){return a})}();